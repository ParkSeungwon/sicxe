copy start 0
plus macro &x,&y,&z
 lda &x
 add &y
 sta &z
 mend 
rdbuff macro &indev,&bufadr,&reclth
 clear x
 clear a
 clear s
 ldt #100
 td =x'&indev'
 jeq *-3
 rd =x'&indev'
 compr a,s
 jeq *+11
 stch &bufadr,x
 tixr t
 jlt *-19
 stx &reclth
 mend 
first stl retadr
 rdbuff f1,buffer,length
cloop lda length
 comp #0
 jeq endfil
 plus a,b,c
 j cloop
endfil j @retadr
eof byte c'eof'
retadr resw 1
a word 100
b word 200
c resw 1
length resw 1
buffer resb 4096
 end first
